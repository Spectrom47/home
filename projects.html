<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Projects - MyWebsite</title>
  <style>
    /* Base Reset & Layout (kept simple & nested where useful) */
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }

    /* Wallpaper background (your chosen Unsplash) */
    body {
      display: flex;
      min-height: 100vh;
      flex-direction: column;
      color: #e6eef8;
      background: linear-gradient(120deg, rgba(15,23,42,0.88), rgba(30,58,138,0.84)),
                  url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
      background-size: cover;
    }

    /* Header / Nav */
    header {
      background: rgba(9,12,20,0.78);
      color: #fff;
      padding: 16px 20px;
      backdrop-filter: blur(6px);
      box-shadow: 0 6px 20px rgba(2,6,23,0.6);
    }
    .container { max-width: 1024px; margin: 0 auto; display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .logo { font-weight:700; letter-spacing:0.6px; color:#fff; }
    nav ul { list-style:none; display:flex; gap:8px; align-items:center; }
    nav a { display:inline-block; padding:8px 12px; color:#c7d2fe; text-decoration:none; border-radius:8px; transition:all .15s ease; }
    nav a:hover { color:#fff; background:rgba(255,255,255,0.05); transform:translateY(-1px); }
    nav li.tab-active > a, nav a.tab-active { color:#0f1724; background:#60a5fa; box-shadow:0 6px 18px rgba(96,165,250,0.28); }

    /* Main wrapper gets a frosted card */
    main {
      flex:1;
      max-width: 1200px;
      margin: 36px auto;
      width: 94%;
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 20px;
      align-items: start;
    }

    /* Calendar panel */
    .panel {
      background: rgba(255,255,255,0.08);
      border-radius: 14px;
      padding: 18px;
      backdrop-filter: blur(8px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
      color: #e6eef8;
    }

    .panel h1 { margin-bottom: 8px; font-size: 20px; color: #fff; }
    .panel p { color: #cfe0ff; margin-bottom: 12px; }

    /* Calendar header controls */
    .cal-header { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px; }
    .cal-nav { display:flex; gap:8px; }
    .btn { padding:8px 10px; border-radius:8px; cursor:pointer; border:0; font-weight:600; background: rgba(255,255,255,0.06); color:#e6eef8; box-shadow: 0 6px 18px rgba(2,6,23,0.45); transition: all .12s ease; }
    .btn:hover { transform: translateY(-2px); background: rgba(255,255,255,0.09); }

    /* Calendar grid: square date frames like a calendar */
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }

    .day-name {
      text-align:center;
      font-size:12px;
      color:#bcd7ff;
      opacity:0.95;
    }

    .date-cell {
      background: rgba(255,255,255,0.04);
      border-radius:8px;
      padding:10px;
      min-height:92px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      cursor:pointer;
      transition: transform .14s ease, box-shadow .14s ease, background .12s ease;
      border: 1px solid rgba(255,255,255,0.03);
    }
    .date-cell:hover { transform: translateY(-4px); box-shadow: 0 10px 30px rgba(2,6,23,0.6); background: rgba(255,255,255,0.06); }

    .date-top { display:flex; justify-content:space-between; align-items:center; gap:8px; }
    .date-num { font-weight:700; color:#fff; font-size:14px; }
    .badge { font-size:11px; padding:4px 7px; border-radius:999px; background: rgba(96,165,250,0.18); color:#cfe0ff; }

    .events-list { margin-top:8px; display:flex; flex-direction:column; gap:6px; }
    .evt {
      font-size:12px;
      padding:6px 8px;
      border-radius:8px;
      background: linear-gradient(90deg, rgba(96,165,250,0.12), rgba(59,130,246,0.1));
      color:#eaf2ff;
      box-shadow: 0 6px 14px rgba(2,6,23,0.3);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* Right-side timeline tree */
    .timeline {
      background: rgba(255,255,255,0.06);
      border-radius: 14px;
      padding: 14px;
      height: fit-content;
    }
    .timeline h3 { color:#fff; margin-bottom:8px; }
    .timeline .item {
      padding:10px;
      border-radius:10px;
      background: rgba(255,255,255,0.03);
      margin-bottom:8px;
      color:#dbeeff;
      font-size:13px;
      display:flex; justify-content:space-between; gap:8px; align-items:center;
    }
    .timeline .time { color:#bcd7ff; font-weight:600; font-size:12px; }

    footer { margin: 24px auto 40px; width:94%; max-width:1200px; text-align:center; color:#cfe0ff; }

    /* Modal (centered) */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(2,6,23,0.6);
      z-index: 1000;
    }
    .modal {
      width: 92%;
      max-width: 720px;
      background: rgba(12,16,28,0.96);
      border-radius: 12px;
      padding: 18px;
      color: #e6eef8;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
    }
    .modal h2 { margin-bottom:8px; color:#fff; }
    .form-row { display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; }
    .input, textarea, select {
      padding:10px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.02);
      color:#eaf2ff;
      min-width: 0;
    }
    .input { flex:1; }
    textarea { width:100%; min-height:90px; resize:vertical; }

    .muted { color:#bcd7ff; font-size:13px; }
    .hint { color:#9fbff6; font-size:12px; margin-top:8px; }

    /* small screens layout */
    @media (max-width: 960px) {
      main { grid-template-columns: 1fr; margin: 20px auto; }
      .timeline { order: 2; margin-top:10px; }
    }
  </style>
</head>
<body>

  <header>
    <div class="container">
      <div class="logo">Spectroms Kingdom</div>
      <nav aria-label="Main navigation">
        <ul>
          <li><a href="index.html" class="tab">Home</a></li>
          <li><a href="projects.html" class="tab tab-active">Projects</a></li>
          <li><a href="contact.html" class="tab">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <!-- Calendar / Timeline panel -->
    <section class="panel" id="calendarPanel">
      <div class="cal-header">
        <div>
          <h1>Project Timeline</h1>
          <p class="muted">Click a date square to view or (if admin) add events. Press <strong>Shift+Q</strong> to open admin login.</p>
        </div>
        <div class="cal-nav">
          <button class="btn" id="prevMonthBtn" title="Previous month">◀</button>
          <div style="min-width:170px; text-align:center; color:#dbeeff;" id="monthLabel">Month</div>
          <button class="btn" id="nextMonthBtn" title="Next month">▶</button>
        </div>
      </div>

      <div class="calendar" id="calendarGrid">
        <!-- day names -->
      </div>
    </section>

    <!-- Timeline tree -->
    <aside class="timeline panel" id="timelinePanel">
      <h3>Upcoming Events</h3>
      <div id="timelineList">
        <!-- events populated here -->
      </div>
      <div class="hint">Events persist locally on this browser using <code>localStorage</code>. Admin-only edits unlock with Shift+Q.</div>
    </aside>
  </main>

  <footer>
    © 2025 MyWebsite — built with slightly too much coffee and curiosity.
  </footer>

  <!-- Modal: day details + add/edit -->
  <div class="modal-backdrop" id="dayModal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="dayModalTitle">
      <h2 id="dayModalTitle">Day</h2>
      <div id="dayEventsContainer" style="margin-top:8px;"></div>

      <hr style="margin:12px 0; border-color: rgba(255,255,255,0.04)" />

      <div id="addEventSection">
        <div style="display:flex; justify-content:space-between; gap:8px; align-items:center;">
          <div class="muted" id="formDateLabel">Add event for DATE</div>
          <div class="muted" id="adminIndicator">Not admin</div>
        </div>

        <div class="form-row" style="margin-top:8px;">
          <input class="input" id="evtTitle" placeholder="Event title (eg. Build sprint)" />
          <input class="input" id="evtStart" type="time" />
          <input class="input" id="evtEnd" type="time" />
        </div>
        <div style="margin-top:8px;">
          <textarea id="evtDesc" placeholder="Description (optional)"></textarea>
        </div>

        <div style="display:flex; gap:8px; margin-top:10px;">
          <button class="btn" id="saveEvtBtn">Save event</button>
          <button class="btn" id="closeDayModal">Close</button>
        </div>
        <div class="hint" style="margin-top:8px;">If you're not admin the save button is disabled. Admin can add or remove events.</div>
      </div>
    </div>
  </div>

  <!-- Modal: admin login -->
  <div class="modal-backdrop" id="adminModal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="adminModalTitle">
      <h2 id="adminModalTitle">Admin login (hidden)</h2>
      <div style="margin-top:8px;">
        <input class="input" id="adminUser" placeholder="username" />
      </div>
      <div style="margin-top:8px;">
        <input class="input" id="adminPass" placeholder="password" type="password" />
      </div>
      <div style="display:flex; gap:8px; margin-top:12px;">
        <button class="btn" id="loginBtn">Login</button>
        <button class="btn" id="cancelLoginBtn">Cancel</button>
      </div>
      <div class="hint" style="margin-top:8px;">(Demo creds: username <code>admin</code>, password <code>admin123</code>)</div>
    </div>
  </div>

  <script>
    (function () {
      /* Simple client-side calendar & event system
         - Events stored in localStorage under key "project_timeline_events"
         - Each event: {id, dateISO (YYYY-MM-DD), title, desc, startHHMM, endHHMM, createdAt}
         - Admin login unlocked via Shift+Q -> opens modal. Demo credentials below.
         - IMPORTANT: This is client-only demo code. For production, implement server auth & persistent DB.
      */

      // ---------- Config / state ----------
      const STORAGE_KEY = 'project_timeline_events_v1';
      // Demo admin credentials (change to your own). This is client-side only.
      const ADMIN_USER = 'admin';
      const ADMIN_PASS = 'admin123';

      let isAdmin = false;
      let currentYear, currentMonth; // month: 0..11
      const dayNames = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

      // ---------- DOM refs ----------
      const calendarGrid = document.getElementById('calendarGrid');
      const monthLabel = document.getElementById('monthLabel');
      const prevBtn = document.getElementById('prevMonthBtn');
      const nextBtn = document.getElementById('nextMonthBtn');
      const timelineList = document.getElementById('timelineList');

      const dayModal = document.getElementById('dayModal');
      const dayModalTitle = document.getElementById('dayModalTitle');
      const dayEventsContainer = document.getElementById('dayEventsContainer');
      const formDateLabel = document.getElementById('formDateLabel');
      const adminIndicator = document.getElementById('adminIndicator');

      const evtTitle = document.getElementById('evtTitle');
      const evtStart = document.getElementById('evtStart');
      const evtEnd = document.getElementById('evtEnd');
      const evtDesc = document.getElementById('evtDesc');
      const saveEvtBtn = document.getElementById('saveEvtBtn');
      const closeDayModal = document.getElementById('closeDayModal');

      const adminModal = document.getElementById('adminModal');
      const adminUser = document.getElementById('adminUser');
      const adminPass = document.getElementById('adminPass');
      const loginBtn = document.getElementById('loginBtn');
      const cancelLoginBtn = document.getElementById('cancelLoginBtn');

      let selectedDateISO = null; // YYYY-MM-DD

      // ---------- utilities ----------
      function loadEvents() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          return raw ? JSON.parse(raw) : [];
        } catch (e) {
          console.warn('Failed to parse events', e);
          return [];
        }
      }
      function saveEvents(arr) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
      }
      function eventsForDate(dateISO) {
        return loadEvents().filter(e => e.dateISO === dateISO).sort((a,b) => a.startHHMM.localeCompare(b.startHHMM));
      }
      function allUpcomingEvents() {
        const todayISO = toISO(new Date());
        return loadEvents().filter(e => e.dateISO >= todayISO).sort((a,b) => (a.dateISO + a.startHHMM).localeCompare(b.dateISO + b.startHHMM));
      }
      function toISO(d) {
        const y = d.getFullYear();
        const m = String(d.getMonth() + 1).padStart(2,'0');
        const dd = String(d.getDate()).padStart(2,'0');
        return `${y}-${m}-${dd}`;
      }
      function formatDayLabel(iso) {
        const d = new Date(iso + 'T00:00:00');
        return d.toLocaleDateString(undefined, { weekday: 'short', month: 'short', day: 'numeric' });
      }
      function uid() { return Math.random().toString(36).slice(2,10); }
      function timeToHHMM(t) { // expects "HH:MM"
        return t;
      }

      // ---------- calendar rendering ----------
      function renderCalendar(year, month) {
        calendarGrid.innerHTML = '';
        // day names
        for (let i=0;i<7;i++) {
          const dn = document.createElement('div');
          dn.className = 'day-name';
          dn.textContent = dayNames[i];
          calendarGrid.appendChild(dn);
        }

        const first = new Date(year, month, 1);
        const firstWeekday = first.getDay();
        const daysInMonth = new Date(year, month+1, 0).getDate();

        // fill blanks before first day
        for (let i=0;i<firstWeekday;i++) {
          const blank = document.createElement('div');
          blank.className = 'date-cell';
          blank.style.opacity = 0.2;
          calendarGrid.appendChild(blank);
        }

        for (let d=1; d<=daysInMonth; d++) {
          const date = new Date(year, month, d);
          const iso = toISO(date);
          const cell = document.createElement('div');
          cell.className = 'date-cell';
          cell.dataset.iso = iso;

          // top row: date number and badge if events exist
          const top = document.createElement('div');
          top.className = 'date-top';
          const num = document.createElement('div'); num.className='date-num'; num.textContent = d;
          top.appendChild(num);

          const evts = eventsForDate(iso);
          if (evts.length) {
            const b = document.createElement('div'); b.className='badge'; b.textContent = `${evts.length} event${evts.length>1?'s':''}`;
            top.appendChild(b);
          } else {
            const spacer = document.createElement('div'); spacer.style.minWidth = '34px'; top.appendChild(spacer);
          }
          cell.appendChild(top);

          // events preview (first 2)
          const list = document.createElement('div'); list.className='events-list';
          evts.slice(0,2).forEach(e => {
            const eEl = document.createElement('div'); eEl.className='evt';
            eEl.textContent = `${e.startHHMM} • ${e.title}`;
            list.appendChild(eEl);
          });
          if (evts.length > 2) {
            const more = document.createElement('div'); more.className='muted'; more.textContent = `+${evts.length - 2} more...`; more.style.fontSize='12px'; list.appendChild(more);
          }
          cell.appendChild(list);

          // click opens modal
          cell.addEventListener('click', () => { openDayModal(iso); });

          calendarGrid.appendChild(cell);
        }

        // update month label
        const monthName = first.toLocaleDateString(undefined, { month: 'long', year: 'numeric' });
        monthLabel.textContent = monthName;

        // refresh timeline list
        renderTimeline();
      }

      // ---------- timeline rendering ----------
      function renderTimeline() {
        timelineList.innerHTML = '';
        const upcoming = allUpcomingEvents();
        if (!upcoming.length) {
          timelineList.innerHTML = '<div class="muted">No upcoming events. Admins can add events to the calendar.</div>';
          return;
        }
        upcoming.forEach(e => {
          const item = document.createElement('div');
          item.className = 'item';
          const left = document.createElement('div'); left.innerHTML = `<strong style="color:#fff">${e.title}</strong><div style="font-size:12px;color:#bcd7ff">${formatDayLabel(e.dateISO)}</div>`;
          const right = document.createElement('div'); right.style.textAlign='right';
          const time = document.createElement('div'); time.className='time'; time.textContent = `${e.startHHMM} → ${e.endHHMM || '—'}`;
          right.appendChild(time);
          if (isAdmin) {
            const del = document.createElement('button'); del.className='btn'; del.textContent='Delete'; del.style.marginTop='8px'; del.style.background='rgba(255,80,80,0.12)';
            del.addEventListener('click', (ev) => { ev.stopPropagation(); deleteEvent(e.id); });
            right.appendChild(del);
          }
          item.appendChild(left);
          item.appendChild(right);
          item.addEventListener('click', () => { openDayModal(e.dateISO); });
          timelineList.appendChild(item);
        });
      }

      // ---------- modal handling ----------
      function openDayModal(dateISO) {
        selectedDateISO = dateISO;
        dayModalTitle.textContent = `Events for ${formatDayLabel(dateISO)}`;
        formDateLabel.textContent = `Add event for ${dateISO}`;
        adminIndicator.textContent = isAdmin ? 'Admin: editing enabled' : 'Viewer mode';
        // show existing events
        refreshDayEvents();
        // admin toggle save button
        saveEvtBtn.disabled = !isAdmin;
        dayModal.style.display = 'flex';
      }
      function closeDayModalFn() {
        dayModal.style.display = 'none';
        // clear form
        evtTitle.value=''; evtStart.value=''; evtEnd.value=''; evtDesc.value='';
      }

      function refreshDayEvents() {
        dayEventsContainer.innerHTML = '';
        const evts = eventsForDate(selectedDateISO);
        if (!evts.length) {
          dayEventsContainer.innerHTML = '<div class="muted">No events on this day.</div>';
          return;
        }
        evts.forEach(e => {
          const wrap = document.createElement('div'); wrap.style.marginBottom='8px';
          const title = document.createElement('div'); title.style.fontWeight='700'; title.textContent = `${e.startHHMM} • ${e.title}`;
          const desc = document.createElement('div'); desc.style.fontSize='13px'; desc.style.color='#cfe0ff'; desc.textContent = e.desc || '';
          wrap.appendChild(title); wrap.appendChild(desc);
          if (isAdmin) {
            const row = document.createElement('div'); row.style.marginTop='6px'; row.style.display='flex'; row.style.gap='8px';
            const edit = document.createElement('button'); edit.className='btn'; edit.textContent='Edit';
            const del = document.createElement('button'); del.className='btn'; del.textContent='Delete'; del.style.background='rgba(255,80,80,0.12)';
            edit.addEventListener('click', () => { populateFormForEdit(e); });
            del.addEventListener('click', () => { if(confirm('Delete event?')) deleteEvent(e.id); });
            row.appendChild(edit); row.appendChild(del);
            wrap.appendChild(row);
          }
          dayEventsContainer.appendChild(wrap);
        });
      }

      function populateFormForEdit(evt) {
        selectedDateISO = evt.dateISO;
        evtTitle.value = evt.title;
        evtStart.value = evt.startHHMM;
        evtEnd.value = evt.endHHMM || '';
        evtDesc.value = evt.desc || '';
        // when saving, we'll replace by id
        saveEvtBtn.dataset.editing = evt.id;
      }

      // ---------- save / delete ----------
      function saveEvent() {
        if (!isAdmin) { alert('You must be admin to save events.'); return; }
        const title = evtTitle.value.trim();
        const start = evtStart.value;
        const end = evtEnd.value;
        if (!title) { alert('Event needs a title.'); return; }
        if (!start) { alert('Please set a start time.'); return; }
        if (end && end <= start) { alert('End time must be after start time.'); return; }

        const all = loadEvents();
        const editingId = saveEvtBtn.dataset.editing;
        if (editingId) {
          // replace existing
          const idx = all.findIndex(x => x.id === editingId);
          if (idx !== -1) {
            all[idx].title = title; all[idx].startHHMM = timeToHHMM(start); all[idx].endHHMM = timeToHHMM(end); all[idx].desc = evtDesc.value.trim();
          }
          delete saveEvtBtn.dataset.editing;
        } else {
          const newEvt = { id: uid(), dateISO: selectedDateISO, title, desc: evtDesc.value.trim(), startHHMM: timeToHHMM(start), endHHMM: end ? timeToHHMM(end) : '', createdAt: new Date().toISOString() };
          all.push(newEvt);
        }
        saveEvents(all);
        refreshDayEvents();
        renderCalendar(currentYear, currentMonth);
        renderTimeline();
        // clear form
        evtTitle.value=''; evtStart.value=''; evtEnd.value=''; evtDesc.value='';
        alert('Saved.');
      }
      function deleteEvent(id) {
        const all = loadEvents().filter(e => e.id !== id);
        saveEvents(all);
        refreshDayEvents();
        renderCalendar(currentYear, currentMonth);
        renderTimeline();
      }

      // ---------- admin login flow ----------
      function openAdminModal() {
        adminUser.value = ''; adminPass.value = '';
        adminModal.style.display = 'flex';
      }
      function closeAdminModal() {
        adminModal.style.display = 'none';
      }
      function attemptLogin() {
        const u = adminUser.value.trim();
        const p = adminPass.value;
        if (u === ADMIN_USER && p === ADMIN_PASS) {
          isAdmin = true;
          closeAdminModal();
          renderTimeline(); // update delete buttons
          alert('Admin unlocked.');
        } else {
          alert('Bad credentials.');
        }
      }

      // ---------- navigation controls ----------
      prevBtn.addEventListener('click', () => {
        currentMonth--;
        if (currentMonth < 0) { currentMonth = 11; currentYear--; }
        renderCalendar(currentYear, currentMonth);
      });
      nextBtn.addEventListener('click', () => {
        currentMonth++;
        if (currentMonth > 11) { currentMonth = 0; currentYear++; }
        renderCalendar(currentYear, currentMonth);
      });

      // modal buttons
      closeDayModal.addEventListener('click', closeDayModalFn);
      saveEvtBtn.addEventListener('click', saveEvent);

      // admin modal buttons
      loginBtn.addEventListener('click', attemptLogin);
      cancelLoginBtn.addEventListener('click', closeAdminModal);

      // close modals when clicking backdrop
      document.querySelectorAll('.modal-backdrop').forEach(mb => {
        mb.addEventListener('click', (e) => {
          if (e.target === mb) mb.style.display = 'none';
        });
      });

      // Shift+Q opens admin login (hidden)
      window.addEventListener('keydown', (e) => {
        if (e.shiftKey && e.code === 'KeyQ') {
          openAdminModal();
        }
      });

      // small helper: clicking outside the modal or pressing Escape closes modals
      window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          dayModal.style.display = 'none'; adminModal.style.display = 'none';
        }
      });

      // initialize to current month
      (function init() {
        const today = new Date();
        currentYear = today.getFullYear(); currentMonth = today.getMonth();
        // render day names / calendar
        // render calendar
        renderCalendar(currentYear, currentMonth);

        // tip: show stored events count in console
        console.log('Loaded events:', loadEvents().length);
      })();

      // If user logs out (for demo), reload page or flip flag (we don't implement logout UI here)
      // You can call isAdmin=false in console to drop admin.
      // For production: replace this client-only auth with server-side authentication.
    })();
  </script>
</body>
</html>
